<!DOCTYPE html>
<html>
<head>
    <title><%= aluno.id ? 'Editar' : 'Novo' %> Aluno</title>
    <link rel="icon" href="/images/Logo-pp-school.ico" type="image/x-icon">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light py-5">
    <div class="card shadow mx-auto p-4" style="max-width: 500px;">
        <h1 class="text-center mb-4"><%= aluno.id ? 'Editar Aluno' : 'Novo Aluno' %></h1>

        <% if (erro) { %>
            <div class="alert alert-danger"><%= erro %></div>
        <% } %>

        <form method="POST" action="<%= aluno.id ? '/alunos/editar/' + aluno.id : '/alunos/novo' %>">
            <div class="mb-3">
                <label class="form-label">Nome:</label>
                <input type="text" name="nome" value="<%= aluno.nome || '' %>" class="form-control" required>
            </div>

            <div class="mb-3">
                <label class="form-label">Matrícula:</label>
                <input type="text" name="matricula" value="<%= aluno.matricula || '' %>" class="form-control" required>
            </div>

            <div class="mb-3">
                <label class="form-label">Turma:</label>
                <select name="turma_id" class="form-select" required>
                    <option value="">Selecione a turma</option>
                    <% turmas.forEach(t => { %>
                        <option value="<%= t.id %>" <%= t.id === aluno.turma_id ? 'selected' : '' %>>
                            <%= t.nome %> - <%= t.ano %>
                        </option>
                    <% }) %>
                </select>
            </div>

            <button type="submit" class="btn btn-primary w-100">Salvar</button>
        </form>

        <div class="mt-3 text-center">
            <a href="/alunos">← Voltar para Alunos</a>
        </div>
    </div>
</body>
</html>